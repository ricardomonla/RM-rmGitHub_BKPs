<?php 
/**
 * bdAulas.php es el archivo con la información de la base de datos de las aulas virtuales.
 */

	$bdAulas = [

		'Ingeniería Civil' => [

			'ICI1ro21' => [ 
				'aCUE' => 'vc02'
				'aNOM' => 'Ingeniería Civil [1er Año]',
				'aYTB' => 'PLSOY8GuPHc0Cwf44jcSVV9t54r0ykksRV',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'ICI2do21' => [ 
				'aCUE' => 'vc05'
				'aNOM' => 'Ingeniería Civil [2do Año]',
				'aYTB' => 'PLSOY8GuPHc0BO2Oi4y9BsxfhVHP7DAvjH',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'ICI3ro21' => [ 
				'aCUE' => 'vc08'
				'aNOM' => 'Ingeniería Civil [3er Año]',
				'aYTB' => 'PLSOY8GuPHc0BoRPUx0szagXoK9vRrt0gp',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'ICI4to21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Civil [4to Año]',
				'aYTB' => 'PLSOY8GuPHc0CtmmekAJGx1pXDFlqL-i5q',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'ICI5to21' => [ 
				'aCUE' => 'ur01'
				'aNOM' => 'Ingeniería Civil [5to Año]',
				'aYTB' => 'PLSOY8GuPHc0CcZ5DsBMX4u3gIKG87a6up',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'ICI6to21' => [ 
				'aCUE' => 'ur02'
				'aNOM' => 'Ingeniería Civil [6to Año]',
				'aYTB' => 'id pList YouTube',
				'aCAL' => 'Id Cal Google',
				'aGEN' => 'Id Genialy'
				]
			],
		
		'Ingeniería Electromecánica' => [

			'IEM1ro21' => [ 
				'aCUE' => 'vc03'
				'aNOM' => 'Ingeniería Electromecánica [1er Año]',
				'aYTB' => 'PLSOY8GuPHc0D1cIUQ6KE4Fa80VxzqlZGM',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEM2do21' => [ 
				'aCUE' => 'vc06'
				'aNOM' => 'Ingeniería Electromecánica [2do Año]',
				'aYTB' => 'PLSOY8GuPHc0DVtPWmPaY0PavhT8WINUuB',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEM3ro21' => [ 
				'aCUE' => 'vc09'
				'aNOM' => 'Ingeniería Electromecánica [3er Año]',
				'aYTB' => 'PLSOY8GuPHc0DIwhv2NBaOIrORDH1FafVc',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEM4to21' => [ 
				'aCUE' => 'ur03'
				'aNOM' => 'Ingeniería Electromecánica [4to Año]',
				'aYTB' => 'PLSOY8GuPHc0AefuPEpkENOln2aFecc2Ex',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEM5to21' => [ 
				'aCUE' => 'ur08'
				'aNOM' => 'Ingeniería Electromecánica [5to Año]',
				'aYTB' => 'id pList YouTube',
				'aCAL' => 'Id Cal Google',
				'aGEN' => 'Id Genially'
				]
			],

		'Ingeniería Electrónica' => [

			'IEL1ro21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Electrónica [1er Año]',
				'aYTB' => 'PLSOY8GuPHc0ABU9DTJ3u4IFXlPWtpE3Fc',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEL2do21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Electrónica [2do Año]',
				'aYTB' => 'PLSOY8GuPHc0DQ3sghyebH3509oFmL61Hn',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEL3ro21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Electrónica [3er Año]',
				'aYTB' => 'PLSOY8GuPHc0BUcYc7vMS0tkRQDkEat9vv',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'IEL4to21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Electrónica [4to Año]',
				'aYTB' => 'id pList YouTube',
				'aCAL' => 'Id Cal Google',
				'aGEN' => 'Id Genially'
				],
		
			'IEL5to21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Electrónica [5to Año]',
				'aYTB' => 'id pList YouTube',
				'aCAL' => 'Id Cal Google',
				'aGEN' => 'Id Genially'
				],
		
			'IEL6to21' => [ 
				'aCUE' => 'vc11'
				'aNOM' => 'Ingeniería Electrónica [6to Año]',
				'aYTB' => 'id pList YouTube',
				'aCAL' => 'Id Cal Google',
				'aGEN' => 'Id Genially'
				]
			],
		
		'Pre-Ingreso' => [

			'PIICA21' => [ 
				'aCUE' => 'ur16'
				'aNOM' => 'Pre-Ingreso2021 Intensivo [Comisión A]',
				'aYTB' => 'PLSOY8GuPHc0AiPKzvqodComhSydOLVUXB',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				],
		
			'PIICB21' => [ 
				'aCUE' => 'ur17'
				'aNOM' => 'Pre-Ingreso2021 Intensivo [Comisión B]',
				'aYTB' => 'PLSOY8GuPHc0BPNoXmdoY55G_8ftUnAMjs',
				'aCAL' => 'Id del Calendario',
				'aGEN' => 'Id Genially'
				]
			],

		'Grupo Modelo' => [
			'aID' => [ // Registro modelo.
				'aNOM' => 'Nombre completo del aula',
				'aYTB' => 'Lista de clases grabadas en YouTube.',
				'aCAL' => 'Id de Calendario Google donde estan las clases.',
				'aCUE' => 'Cuenta CCEI asignada al aula.'
				]
			]
		
		];

	
	function getEstado($aID){
		global $bdEstados;
		$Estado = 0;
		foreach ($bdEstados as $aEst => $lista)
			if (in_array($aID, $lista))
				$Estado = $aEst;
		return $Estado;
	}
	function getNom($aID){
		global $bdNoms;
		return isset($bdNoms[$aID]) ? $bdNoms[$aID] : 0;
	}
	function getZoomDat($aID){
		global $bdZoomIDs;
		return isset($bdZoomIDs[$aID]) ? $bdZoomIDs[$aID] : 0;
	}
	function getPListID($aID){
		global $bdPList;
		return isset($bdPList[$aID]) ? $bdPList[$aID] : 0;
	}
	function getPList($aID){
		$PListID = getPListID($aID);
		return $PListID ? 
			"<a target='_blank' href='https://www.youtube.com/playlist?list=".$PListID."'>Clases_Grabadas</a>" : '';
	}
			//"http://www.youtube.com/c/UTNLaRiojaDTIC/playlists" ;

	/**
	 * Genera el html de enlace de un aula a partir de in ID que se encuentra en la base de datos.
	 * @param  string $aID ID del Aula
	 * @return string      HTML de acceso al Aula.
	 */
	function getAula($aID){
		// ZoomDat
			$aZoomDat = getZoomDat($aID);

		if ( !$aZoomDat ) return "<br>ERRORAula<br>";

		// Array enlaces.
			$aEnlaces = [];

		// Estado del Aula
			// echo '['.getEstado($aID).']';
			$aEst = getEstado($aID);

		// ID del Aula
			$aZoomID = $aZoomDat[$aEst];

		// Nombre del Aula
			$nSep = ['x', '~', '-'];
			$nSep = $nSep[$aEst];
			
			$aNom = ( $aNom = getNom($aID) ) ? "$nSep $aNom" : "$nSep $aID UTNLaRioja" ;

			// $aNom = $aID.$nSep.'UTNLaRioja';

		// Enlace del Aula
			$aOnClick   = "onclick=\"gtag('event', '$aNom', {'event_category': '$aID', 'event_label': '', 'value': '$aNom', 'non_interaction': true });\"";
			$aZoomUrl   = "https://zoom.us/j/$aZoomID";
			$aZoom      = "<a target='_blank' href='$aZoomUrl' $aOnClick>$aNom</a>";
			$aEnlaces[] = $aZoom;

		// PlayList
			$aPList = getPList($aID) ;

			if ( $aPList ) $aEnlaces[] = $aPList;

			$aEnlaces = implode(' ---> ', $aEnlaces);
			
		return "<p class='align-center' mbr-fonts-style panel-text display-7'>$aEnlaces</p>";
	}
		// onclick="gaReg('$id'); return false;"
	
/**
 * Genera el html del grupo de Aulas.
 * @param  string $grupo  ID del grupo
 * @param  string $titulo TITULO para mostrar del Grupo.
 * @param  string $aulas  HTML de las Aulas.
 * @return html           HTML del Grupo.
 */
function getGrupo($grupo='', $titulo='', $aulas=''){
    $grupo2 = $grupo . '_0';
    
    return <<<HTML
    <div class="card"> <!-- $titulo -->
        <div class="card-header" role="tab" id="headingOne">
            <a role="button" class="panel-title collapsed text-black" data-toggle="collapse" data-core="" href="#$grupo2" aria-expanded="false" aria-controls="$grupo">
                <h4 class="mbr-fonts-style display-5">
                    <span class="sign mbr-iconfont mbri-arrow-down inactive"></span>
                    $titulo
                  </h4>
              </a>
          </div>
        <div id="$grupo2" class="panel-collapse noScroll collapse " role="tabpanel" aria-labelledby="headingOne" data-parent="#bootstrap-accordion_0">
            <div class="panel-body p-4">
              $aulas
            </div>
          </div>
    </div>
HTML;
  }

function getGrupo2($grupo='', $titulo='', $aulas=''){
    $grupo2 = $grupo . '_0';
    
    return <<<HTML
    <div class="card"> <!-- $titulo -->
        <div class="card-header" role="tab" id="headingDos">
            <a role="button" class="panel-title collapsed text-black" data-toggle="collapse" data-core="" href="#$grupo2" aria-expanded="false" aria-controls="$grupo">
                <h4 class="mbr-fonts-style display-5">
                    <span class="sign mbr-iconfont mbri-arrow-down inactive"></span>
                    $titulo
                  </h4>
              </a>
          </div>
        <div id="$grupo2" class="panel-collapse noScroll collapse " role="tabpanel" aria-labelledby="headingDos" data-parent="#bootstrap-accordion_0">
            <div class="panel-body p-4">
              $aulas
            </div>
          </div>
    </div>
HTML;
  }

	// echo '<pre>'.print_r( $bdZoomIDs, true ).'</pre>';

	// exit;

 ?>